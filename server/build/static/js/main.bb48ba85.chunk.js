(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(t,e,n){},133:function(t,e){},135:function(t,e){},170:function(t,e){},171:function(t,e){},222:function(t,e,n){},224:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(94),r=n.n(i),c=(n(103),n(12)),l=n(13),u=n(15),s=n(14),h=n(16),f=n(225),d=n(226),p=n(227),m=n(52),b=n.n(m);function v(t,e,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var o="expires="+a.toGMTString();document.cookie=t+"="+e+";"+o+";path=/"}var g={setCookie:v,getCookie:function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""},deleteCookie:function(t){v(t,"delete",0)}},w=n(36),O=n.n(w),k=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(s.a)(e).call(this,t))).getEmail=function(t){n.setState({email:t})},n.state={email:""},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=this.getEmail,e={Authorization:"bearer ".concat(g.getCookie("token"))};O()({method:"get",url:"http://localhost:3002/api/get/email",headers:e}).then(function(e){t(e.data.email)}).catch(function(t){alert(t)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Sample Application"),o.a.createElement("h2",null,"Hi user! Is you email ",this.state.email,"?"))}}]),e}(o.a.Component),j=n(30),E=n.n(j),y=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=E.a.parse(window.location.search);if(!t.code||!t.state)return alert("unallowed connection"),window.location.href="/";if(t.state!==g.getCookie("state"))return alert("invalid authorization"),window.location.href="/";var e=E.a.stringify({client_id:"9x3bEdlVe9XS1fQ5P0BohJHbow88vO8X",client_secret:"VEJNF6HcuOWWpkRxB376bvqzK5pKhMza",redirect_url:"http://localhost:3001/login/auth",code:t.code,state:t.state});O()({method:"get",url:"http://localhost:3002/api/auth/token?".concat(e)}).then(function(t){return g.setCookie("token",t.data,100),window.location.href="/"}).catch(function(t){return alert(t),window.location.href="/login"})}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),e}(o.a.Component),C=n(95),_=n.n(C),B=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(s.a)(e).call(this,t))).buttonClick=function(){var t=E.a.stringify({client_id:n.state.client_id,redirect_url:n.state.redirect_url,scope:n.state.scope,state:n.state.state});window.location.href="http://localhost:3000/api/auth/app?".concat(t)},n.state={client_id:"",redirect_url:"",scope:"",state:""},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=_.a.generate();this.setState({client_id:"9x3bEdlVe9XS1fQ5P0BohJHbow88vO8X",redirect_url:"http://localhost:3001/login/auth",scope:"email",state:t}),g.setCookie("state",t,1)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Sample Application"),o.a.createElement("button",{onClick:this.buttonClick},"Login with Sample Service"))}}]),e}(o.a.Component),x=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"404 Not Found"))}}]),e}(o.a.Component),S=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(o)))).returnBool=function(t,e){return!!g.getCookie("token")},n.ifFalse=function(t,e,n){"/login"!==t&&(n(),alert("Please login first"),window.location.href="/login")},n.ifTrue=function(t,e,n){if("/login"===t)return alert("You already logged-in"),window.location.href="/"},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(b.a,{exact:!0,ifTrue:this.ifTrue,ifFalse:this.ifFalse,returnBool:this.returnBool,path:"/",component:k}),o.a.createElement(p.a,{exact:!0,path:"/login/auth",component:y}),o.a.createElement(b.a,{exact:!0,ifTrue:this.ifTrue,ifFalse:this.ifFalse,returnBool:this.returnBool,path:"/login",component:B}),o.a.createElement(p.a,{component:x}))}}]),e}(o.a.Component),T=(n(222),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(f.a,null,o.a.createElement(S,null)))}}]),e}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},98:function(t,e,n){t.exports=n(224)}},[[98,2,1]]]);
//# sourceMappingURL=main.bb48ba85.chunk.js.map