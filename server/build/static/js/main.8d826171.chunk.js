(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},133:function(e,t){},135:function(e,t){},170:function(e,t){},171:function(e,t){},222:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(94),r=n.n(i),c=(n(103),n(12)),l=n(13),u=n(15),s=n(14),h=n(16),f=n(225),d=n(226),p=n(227),m=n(52),b=n.n(m);function g(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="expires="+o.toGMTString();document.cookie=e+"="+t+";"+a+";path=/"}var v={setCookie:g,getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},deleteCookie:function(e){g(e,"delete",0)}},w=n(36),O=n.n(w),k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).getEmail=function(e){n.setState({email:e})},n.state={email:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this.getEmail,t={Authorization:"bearer ".concat(v.getCookie("token"))};O()({method:"get",url:"http://localhost:3002/api/get/email",headers:t}).then(function(t){e(t.data.email)}).catch(function(e){alert(e)})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Sample Application"),a.a.createElement("h2",null,"Hi user! Is you email ",this.state.email,"?"))}}]),t}(a.a.Component),j=n(30),E=n.n(j),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=E.a.parse(window.location.search);if(!e.code||!e.state)return alert("unallowed connection"),window.location.href="/";if(e.state!==v.getCookie("state"))return console.log(e.state),console.log(v.getCookie("state")),console.log(document.cookie),alert("invalid authorization"),window.location.href="/";var t=E.a.stringify({client_id:"9x3bEdlVe9XS1fQ5P0BohJHbow88vO8X",client_secret:"VEJNF6HcuOWWpkRxB376bvqzK5pKhMza",redirect_url:"http://localhost:3001/login/auth",code:e.code,state:e.state});O()({method:"get",url:"http://localhost:3002/api/auth/token?".concat(t)}).then(function(e){return v.setCookie("token",e.data,100),window.location.href="/"}).catch(function(e){return alert(e),window.location.href="/login"})}},{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(a.a.Component),C=n(95),_=n.n(C),B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).buttonClick=function(){var e=_.a.generate();v.setCookie("state",e,1);var t=E.a.stringify({client_id:n.state.client_id,redirect_url:n.state.redirect_url,scope:n.state.scope,state:e});window.location.href="http://localhost:3002/api/auth/app?".concat(t)},n.state={client_id:"",redirect_url:"",scope:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({client_id:"9x3bEdlVe9XS1fQ5P0BohJHbow88vO8X",redirect_url:"http://localhost:3001/login/auth",scope:"email"})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Sample Application"),a.a.createElement("button",{onClick:this.buttonClick},"Login with Sample Service"))}}]),t}(a.a.Component),x=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"404 Not Found"))}}]),t}(a.a.Component),S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).returnBool=function(e,t){return!!v.getCookie("token")},n.ifFalse=function(e,t,n){"/login"!==e&&(n(),alert("Please login first"),window.location.href="/login")},n.ifTrue=function(e,t,n){if("/login"===e)return alert("You already logged-in"),window.location.href="/"},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(d.a,null,a.a.createElement(b.a,{exact:!0,ifTrue:this.ifTrue,ifFalse:this.ifFalse,returnBool:this.returnBool,path:"/",component:k}),a.a.createElement(p.a,{exact:!0,path:"/login/auth",component:y}),a.a.createElement(b.a,{exact:!0,ifTrue:this.ifTrue,ifFalse:this.ifFalse,returnBool:this.returnBool,path:"/login",component:B}),a.a.createElement(p.a,{component:x}))}}]),t}(a.a.Component),T=(n(222),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(f.a,null,a.a.createElement(S,null)))}}]),t}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,n){e.exports=n(224)}},[[98,2,1]]]);
//# sourceMappingURL=main.8d826171.chunk.js.map